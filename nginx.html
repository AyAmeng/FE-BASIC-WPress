<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx | Vya 会发现更大的世界</title>
    <meta name="description" content="Just Build My FE Knowledge">
    <link rel="icon" href="/magic-wpress/star.png">
    
    <link rel="preload" href="/magic-wpress/assets/css/0.styles.c0f5af43.css" as="style"><link rel="preload" href="/magic-wpress/assets/js/app.ffb33560.js" as="script"><link rel="preload" href="/magic-wpress/assets/js/5.81b5b7c8.js" as="script"><link rel="preload" href="/magic-wpress/assets/js/15.2560267a.js" as="script"><link rel="preload" href="/magic-wpress/assets/js/12.43091a21.js" as="script"><link rel="prefetch" href="/magic-wpress/assets/js/10.0efb7aa8.js"><link rel="prefetch" href="/magic-wpress/assets/js/11.1b52a7f7.js"><link rel="prefetch" href="/magic-wpress/assets/js/13.2b1d2b1d.js"><link rel="prefetch" href="/magic-wpress/assets/js/14.e8e484a7.js"><link rel="prefetch" href="/magic-wpress/assets/js/16.dd9c5ae6.js"><link rel="prefetch" href="/magic-wpress/assets/js/17.847046a7.js"><link rel="prefetch" href="/magic-wpress/assets/js/18.85fc4d39.js"><link rel="prefetch" href="/magic-wpress/assets/js/19.84f73f9c.js"><link rel="prefetch" href="/magic-wpress/assets/js/2.e31f1fed.js"><link rel="prefetch" href="/magic-wpress/assets/js/20.139852f2.js"><link rel="prefetch" href="/magic-wpress/assets/js/21.5e9a5adf.js"><link rel="prefetch" href="/magic-wpress/assets/js/22.7f8b2140.js"><link rel="prefetch" href="/magic-wpress/assets/js/23.5776b696.js"><link rel="prefetch" href="/magic-wpress/assets/js/24.9addfb18.js"><link rel="prefetch" href="/magic-wpress/assets/js/25.7f9e7fb0.js"><link rel="prefetch" href="/magic-wpress/assets/js/26.97fb386b.js"><link rel="prefetch" href="/magic-wpress/assets/js/27.6b4b46b3.js"><link rel="prefetch" href="/magic-wpress/assets/js/3.fc4805d2.js"><link rel="prefetch" href="/magic-wpress/assets/js/4.1edda44d.js"><link rel="prefetch" href="/magic-wpress/assets/js/6.8b9a8051.js"><link rel="prefetch" href="/magic-wpress/assets/js/7.5b5de081.js"><link rel="prefetch" href="/magic-wpress/assets/js/8.9a4ff9b2.js"><link rel="prefetch" href="/magic-wpress/assets/js/9.08fecddf.js">
    <link rel="stylesheet" href="/magic-wpress/assets/css/0.styles.c0f5af43.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/magic-wpress/" class="home-link router-link-active"><img src="/magic-wpress/icon.png" class="logo"> <span class="site-name can-hide">Vya 会发现更大的世界</span></a> <div class="links"><span class="music-player" data-v-349a83d8><img src="/magic-wpress/assets/img/play.4615e8bc.svg" class="playerComtrols" data-v-349a83d8> <audio id="bg-music" controls="controls" autoplay="autoplay" loop="loop" download="false" class="bg-music" data-v-349a83d8><source src="/magic-wpress/time-travel.mp3" data-v-349a83d8></audio></span> <span style="display:none;" data-v-4b39ae44></span> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/magic-wpress/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/ayameng/magic-wpress" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐️ Star Me
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/ayameng/magic-wpress" target="_blank" rel="noopener noreferrer" class="repo-link">
    Open Source
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/magic-wpress/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/ayameng/magic-wpress" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐️ Star Me
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/ayameng/magic-wpress" target="_blank" rel="noopener noreferrer" class="repo-link">
    Open Source
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/magic-wpress/" class="sidebar-link">🎉Hi Coder U R Welcome</a></li><li><a href="/magic-wpress/browser.html" class="sidebar-link">🐿 Hi Browsers</a></li><li><a href="/magic-wpress/template.html" class="sidebar-link">🐳 Network</a></li><li><a href="/magic-wpress/html.html" class="sidebar-link">🌨  Hi HTML</a></li><li><a href="/magic-wpress/javascript.html" class="sidebar-link">⛽ Hi JavaScript</a></li><li><a href="/magic-wpress/css.html" class="sidebar-link">☀️ Hi CSS</a></li><li><a href="/magic-wpress/function.html" class="sidebar-link">🌨 Hi Function</a></li><li><a href="/magic-wpress/object.html" class="sidebar-link">☀️ Hi Object</a></li><li><a href="/magic-wpress/design-patterns.html" class="sidebar-link">⛈ Hi Design patterns</a></li><li><a href="/magic-wpress/algorithm.html" class="sidebar-link">⛽ Hi Algorithm</a></li><li><a href="/magic-wpress/interview.html" class="sidebar-link">☀️ Hi Interview</a></li><li><a href="/magic-wpress/source.html" class="sidebar-link">🐳 Hi Source</a></li><li><a href="/magic-wpress/node.html" class="sidebar-link">⛈Hi Node</a></li><li><a href="/magic-wpress/nginx.html" class="active sidebar-link">⛽Nginx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#一-安装" class="sidebar-link">一. 安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#_1-安装编译工具及库文件" class="sidebar-link">1. 安装编译工具及库文件</a></li><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#_2-首先要安装-pcre-作用是让-nginx-支持-rewrite-功能。" class="sidebar-link">2. 首先要安装 PCRE 作用是让 Nginx 支持 Rewrite 功能。</a></li><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#_3-安装-nginx" class="sidebar-link">3. 安装 Nginx</a></li></ul></li><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#_2-配置" class="sidebar-link">2. 配置</a></li><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#_3-使用" class="sidebar-link">3. 使用</a></li><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#yum" class="sidebar-link">Yum</a></li><li class="sidebar-sub-header"><a href="/magic-wpress/nginx.html#error" class="sidebar-link">Error</a></li></ul></li><li><a href="/magic-wpress/common-sense.html" class="sidebar-link">⛈ Language</a></li><li><a href="/magic-wpress/about-me.html" class="sidebar-link">☀️ 蜜汁彩蛋</a></li> <!----></ul> </div> <div class="page"> <div class="content"><h1 id="nginx">Nginx</h1> <p><img src="data:image/png;base64,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" alt="1"></p> <hr> <h2 id="一-安装">一. 安装</h2> <h3 id="_1-安装编译工具及库文件">1. 安装编译工具及库文件</h3> <p><code>yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel pcre pcre-devel</code></p> <h3 id="_2-首先要安装-pcre-作用是让-nginx-支持-rewrite-功能。">2. <code>首先要安装 PCRE 作用是让 Nginx 支持 Rewrite 功能。</code></h3> <ul><li>2-1. 下载 PCRE 安装包</li></ul> <p><code>wget http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz</code></p> <ul><li>2-2. 解压安装包:</li></ul> <p><code>[root@bogon src]# tar zxvf pcre-8.35.tar.gz</code></p> <ul><li>2-3. 进入安装包目录</li></ul> <p><code>[root@bogon src]# cd pcre-8.35</code></p> <ul><li>2-4. 编译安装</li></ul> <div class="language-shell extra-class"><pre class="language-text"><code>[root@bogon pcre-8.35]# ./configure
[root@bogon pcre-8.35]# make &amp;&amp; make install
</code></pre></div><ul><li>2-5. 查看 pcre 版本</li></ul> <div class="language-shell extra-class"><pre class="language-text"><code>[root@bogon pcre-8.35]# pcre-config --version
</code></pre></div><h3 id="_3-安装-nginx">3. 安装 Nginx</h3> <ul><li>3-1 下载 Nginx</li></ul> <div class="language-shell extra-class"><pre class="language-text"><code>[root@bogon src]# wget http://nginx.org/download/nginx-1.6.2.tar.gz
</code></pre></div><ul><li>3-2 解压安装包</li></ul> <p><code>[root@bogon src]# tar zxvf nginx-1.6.2.tar.gz</code></p> <ul><li>3-3 进入安装包目录</li></ul> <p><code>[root@bogon src]# cd nginx-1.6.2</code></p> <p>-3-4 编译安装</p> <div class="language-shell extra-class"><pre class="language-text"><code>
[root@bogon nginx-1.6.2]# ./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35
[root@bogon nginx-1.6.2]# make
[root@bogon nginx-1.6.2]# make install

</code></pre></div><ul><li>3-5、查看 nginx 版本</li></ul> <p><code>[root@bogon nginx-1.6.2]# /usr/local/webserver/nginx/sbin/nginx -v</code></p> <p>到此，nginx 安装完成。</p> <h2 id="_2-配置">2. 配置</h2> <ol><li>创建 Nginx 运行使用的用户 www：</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code>
<span class="token punctuation">[</span>root@bogon conf<span class="token punctuation">]</span># <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>groupadd www
<span class="token punctuation">[</span>root@bogon conf<span class="token punctuation">]</span># <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>useradd <span class="token operator">-</span>g www www

</code></pre></div><ol start="2"><li>配置 nginx.conf ，将/usr/local/webserver/nginx/conf/nginx.conf 替换为以下内容</li></ol> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">user</span> <span class="token keyword">root</span><span class="token punctuation">;</span>
<span class="token keyword">worker_processes</span> auto<span class="token punctuation">;</span>
<span class="token keyword">error_log</span> <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token punctuation">.</span>log<span class="token punctuation">;</span>
<span class="token keyword">pid</span> <span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span><span class="token keyword">pid</span><span class="token punctuation">;</span>

<span class="token comment"># Load dynamic modules. See /usr/share/nginx/README.dynamic.</span>
<span class="token keyword">include</span> <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>modules<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span>

<span class="token keyword">events</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> epoll<span class="token punctuation">;</span>
    <span class="token keyword">worker_connections</span> <span class="token number">1024</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">http</span> <span class="token punctuation">{</span>
    <span class="token keyword">log_format</span>  main  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
                      <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
                      <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>

    <span class="token keyword">access_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>

    <span class="token keyword">sendfile</span>            on<span class="token punctuation">;</span>
    <span class="token keyword">types_hash_max_size</span> <span class="token number">2048</span><span class="token punctuation">;</span>

    <span class="token keyword">include</span>             <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>mime<span class="token punctuation">.</span><span class="token keyword">types</span><span class="token punctuation">;</span>
    <span class="token comment">#default_type        text/html;</span>

    <span class="token comment"># Load modular configuration files from the /etc/nginx/conf.d directory.</span>
    <span class="token comment"># See http://nginx.org/en/docs/ngx_core_module.html#include</span>
    <span class="token comment"># for more information.</span>
    <span class="token keyword">include</span> <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>conf<span class="token punctuation">.</span>d<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span>
    <span class="token keyword">server_names_hash_bucket_size</span> <span class="token number">128</span><span class="token punctuation">;</span>
    <span class="token keyword">client_header_buffer_size</span> <span class="token number">32</span>k<span class="token punctuation">;</span>
    <span class="token keyword">large_client_header_buffers</span> <span class="token number">4</span> <span class="token number">32</span>k<span class="token punctuation">;</span>
    <span class="token keyword">client_max_body_size</span> <span class="token number">8</span>m<span class="token punctuation">;</span>

    <span class="token keyword">tcp_nopush</span> on<span class="token punctuation">;</span>
    <span class="token keyword">keepalive_timeout</span> <span class="token number">60</span><span class="token punctuation">;</span>
    <span class="token keyword">tcp_nodelay</span> on<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_connect_timeout</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_send_timeout</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_read_timeout</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_buffer_size</span> <span class="token number">64</span>k<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_buffers</span> <span class="token number">4</span> <span class="token number">64</span>k<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_busy_buffers_size</span> <span class="token number">128</span>k<span class="token punctuation">;</span>z
    <span class="token keyword">fastcgi_temp_file_write_size</span> <span class="token number">128</span>k<span class="token punctuation">;</span>
    <span class="token keyword">gzip</span> on<span class="token punctuation">;</span>
    <span class="token keyword">gzip_min_length</span> <span class="token number">1</span>k<span class="token punctuation">;</span>
    <span class="token keyword">gzip_buffers</span> <span class="token number">4</span> <span class="token number">16</span>k<span class="token punctuation">;</span>
    <span class="token keyword">gzip_http_version</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
    <span class="token keyword">gzip_comp_level</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">gzip_types</span> text<span class="token operator">/</span>plain application<span class="token operator">/</span>x<span class="token operator">-</span>javascript text<span class="token operator">/</span>css application<span class="token operator">/</span>xml<span class="token punctuation">;</span>
    <span class="token keyword">gzip_vary</span> on<span class="token punctuation">;</span>

    <span class="token keyword">server</span> <span class="token punctuation">{</span>
        <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token keyword">server_name</span>  weiya<span class="token punctuation">.</span>design<span class="token punctuation">;</span>
        <span class="token keyword">root</span>         <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token comment"># index    index.html;</span>
        <span class="token comment"># Load configuration files for the default server block.</span>

        <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
          <span class="token keyword">root</span> <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span>static<span class="token operator">/</span><span class="token punctuation">;</span>
          <span class="token keyword">index</span> <span class="token keyword">index</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>
        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">40</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
          <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">server</span> <span class="token punctuation">{</span>
        <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token keyword">server_name</span>  docs<span class="token punctuation">.</span>weiya<span class="token punctuation">.</span>live<span class="token punctuation">;</span>
        <span class="token keyword">root</span>         <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token comment"># index    index.html;</span>
        <span class="token comment"># Load configuration files for the default server block.</span>

        <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
          <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">40</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
          <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">server</span> <span class="token punctuation">{</span>
        <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token keyword">server_name</span>  docs<span class="token punctuation">.</span>weiya<span class="token punctuation">.</span>design<span class="token punctuation">;</span>
        <span class="token keyword">root</span>         <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span><span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
          <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">3000</span><span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">40</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>检查配置文件 nginx.conf 的正确性命令：</li></ol> <p><code>[root@bogon conf]# nginx -t</code></p> <h2 id="_3-使用">3. 使用</h2> <div class="language-ts extra-class"><pre class="language-ts"><code>service nginx start
service nginx restart
service nginx stop

</code></pre></div><h2 id="yum">Yum</h2> <div class="language-ts extra-class"><pre class="language-ts"><code>
<span class="token number">1.</span> rpm <span class="token operator">-</span>qa<span class="token operator">|</span>grep 软件包名

<span class="token number">2.</span> rpm <span class="token operator">-</span>ql <span class="token function">软件包名</span>  <span class="token punctuation">(</span>l是<span class="token constant">L</span>的小写<span class="token punctuation">,</span>不是坚线<span class="token punctuation">)</span>

</code></pre></div><h2 id="error">Error</h2> <div class="language-ts extra-class"><pre class="language-ts"><code>

<span class="token number">28</span>
down vote
accepted
<span class="token constant">I</span> will recommend stopping nginx by killing it<span class="token string">'s master process first. The nginx is not shutdown properly may be because of that it can'</span>t be stopped using init script<span class="token punctuation">.</span>

ps <span class="token operator">-</span>ef <span class="token operator">|</span>grep nginx

This will show you the <span class="token constant">PID</span> <span class="token keyword">of</span> nginx master process<span class="token punctuation">.</span> Like you mentioned above<span class="token punctuation">:</span>

root <span class="token number">19506</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">2013</span> <span class="token operator">?</span> <span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span> nginx<span class="token punctuation">:</span> master process <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>c <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf

Kill it using

kill <span class="token operator">-</span><span class="token number">9</span> <span class="token number">19506</span>

Verify once again whether there is <span class="token builtin">any</span> nginx process running or port <span class="token number">80</span> is occupied<span class="token punctuation">.</span> If you see <span class="token builtin">any</span> process is bind to port <span class="token number">80</span><span class="token punctuation">,</span> Identify the <span class="token constant">PID</span> and check <span class="token keyword">if</span> it can be killed<span class="token punctuation">.</span>

ps <span class="token operator">-</span>ef <span class="token operator">|</span>grep nginx

netstat <span class="token operator">-</span>tulpn <span class="token operator">|</span>grep <span class="token number">80</span>

make sure the filesystem is fine and you can read<span class="token operator">/</span>write to <span class="token operator">/</span><span class="token keyword">var</span> file system<span class="token punctuation">.</span> Then Start nginx

service nginx start

</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/ayameng/magic-wpress/edit/master/docs/nginx.md" target="_blank" rel="noopener noreferrer">Help Me To Do More Good</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/8/2018, 5:07:00 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/magic-wpress/node.html" class="prev">
          ⛈Hi Node
        </a></span> <span class="next"><a href="/magic-wpress/common-sense.html">
          ⛈ Language
        </a> →
      </span></p></div> </div></div></div>
    <script src="/magic-wpress/assets/js/app.ffb33560.js" defer></script><script src="/magic-wpress/assets/js/5.81b5b7c8.js" defer></script><script src="/magic-wpress/assets/js/15.2560267a.js" defer></script><script src="/magic-wpress/assets/js/12.43091a21.js" defer></script>
  </body>
</html>
